.XLIST
PAGE	,132
COMPRESSED	EQU	-1
BOX	EQU	DEBUG

OFF	EQU	OFFSET
BPTR	EQU	BYTE PTR
WPTR	EQU	WORD PTR
OFFS	EQU	WPTR 0
SEGM	EQU	WPTR 2

GMEM_FIXED	EQU	0
GMEM_MOVEABLE	EQU	2
GMEM_ZEROINIT	EQU	40H
;#define GMEM_NOCOMPACT      0x0010
GMEM_NODISCARD	EQU	20H
;#define GMEM_MODIFY         0x0080
;#define GMEM_DISCARDABLE    0x0100
;#define GMEM_NOT_BANKED     0x1000
GMEM_SHARE	EQU	2000H
;#define GMEM_DDESHARE       0x2000
;#define GMEM_NOTIFY         0x4000
;#define GMEM_LOWER          GMEM_NOT_BANKED

WF_80X87	EQU	0400H

RELOC_BUF_SIZE	EQU	100			; # of relocations in 1 packet

MB_OK		EQU	0
MB_ICONHAND	EQU	010H
MB_SYSTEMMODAL	EQU	1000H

FIARQQ	EQU	0FE32H
FJARQQ	EQU	04000H
FISRQQ	EQU	00632H
FJSRQQ	EQU	08000H
FICRQQ	EQU	00E32H
FJCRQQ	EQU	0C000H
FIERQQ	EQU	01632H
FIDRQQ	EQU	05C32H
FIWRQQ	EQU	0A23DH

.DS	CJ

if	DEBUG

.EN	CJ

endif

NMD	MACRO	XX

_&XX	DD	0

	ENDM

MD	MACRO	XX

if	compress_apploader
if	compress_pass1
ifidn	<XX>,<MESSAGEBOX>
__&XX	DD	0
else
_&XX	DD	0
endif
else
ifidn	<XX>,<MESSAGEBOX>
__&XX	DD	XX
else
_&XX	DD	XX
endif
endif
else

_&XX	EQU	XX

endif

	ENDM

MW	MACRO	XX

if	compress_apploader
if	compress_pass1
_&XX	DW	0
else
_&XX	DW	XX
endif
else

_&XX	EQU	XX

endif

	ENDM

INT3		MACRO
		ENDM

DEBMSG		MACRO	XX,YY
		LOCAL	L1,L2
if	debug
IFB	<YY>
		PUSHM	ES,DX,CX,BX,AX
;		MOV	AH,51H
;		INT	21H
;		PUSH	BX
		PUSHM	0,CS,OFF L2,ME_ASCIZ.SEGM,ME_ASCIZ.OFFS,MB_OK+MB_SYSTEMMODAL
		CALL	_MESSAGEBOX
;		POP	BX
;		MOV	AH,50H
;		INT	21H
		POPM	AX,BX,CX,DX,ES
		JMP	L1

L2		DB	XX,0

L1:
ELSE
		PUSHM	ES,DI,DX,CX,BX,AX
		SUB	SP,6
		MOV	AX,SS
		MOV	ES,AX
		MOV	AX,YY
		MOV	DI,SP
		CALL	HEXWOUT
		XOR	AX,AX
		STOSW
		SUB	DI,6
		PUSHM	0,CS,OFF L2,SS,DI,MB_OK+ MB_SYSTEMMODAL
		CALL	_MESSAGEBOX
		ADD	SP,6
		POPM	AX,BX,CX,DX,DI,ES
		JMP	L1

L2		DB	XX,0

L1:

endif
		ENDM

.LIST
