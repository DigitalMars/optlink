.XLIST
POSSIZE		EQU	14
DICT_SIZE	EQU	16K
MAX_MATCH	EQU	256
CHARSET_SIZE	EQU	286	;286
MAXBUF		EQU	65500
BUFBITS		EQU	16
EXTRABITS	EQU	8
THRESHOLD	EQU	2
T2_BITS		EQU	7
T2_LIMIT	EQU	128
HARD_CODED	EQU	7
HMB_SIZE	EQU	2K	;HUF MINI BUFFER SIZE
HPB_SIZE	EQU	2K	;HUF PUT BUFFER SIZE
HTW_SIZE	EQU	8K	;HASH TABLE WORDS

LENFIELD	EQU	4
MAXBITLEN	EQU	(1 SHL LENFIELD)-1
LEASTBIT	EQU	1 SHL (16-MAXBITLEN)

LZW_STRUCT	STRUC

LZW_NEXT	DW	?
LZW_PREV	DW	?
if dict_size eq 8k
LZW_VALUE	DW	?
LZW_POSITION	DW	?
endif
LZW_STRUCT	ENDS

LZW_S1			STRUC

LZW_BUF			DB	DICT_SIZE*2+MAX_MATCH DUP(?)
HUF_FREQ_C		DW	CHARSET_SIZE*2 DUP(?)
HUF_LEFT_C		DW	CHARSET_SIZE*2 DUP(?)
HUF_RIGHT_C		DW	CHARSET_SIZE*2 DUP(?)
HUF_CODEWORD_C		DW	CHARSET_SIZE DUP(?)
HUF_BITLEN_C		DW	CHARSET_SIZE DUP(?)
HUF_BITLEN_C_OLD	DW	CHARSET_SIZE DUP(?)
HUF_FREQ_P		DW	(1 SHL (POSSIZE-HARD_CODED))*2 DUP(?)
HUF_LEFT_P		DW	(1 SHL (POSSIZE-HARD_CODED))*2 DUP(?)
HUF_RIGHT_P		DW	(1 SHL (POSSIZE-HARD_CODED))*2 DUP(?)
HUF_CODEWORD_P		DW	(1 SHL (POSSIZE-HARD_CODED)) DUP(?)
HUF_BITLEN_P		DW	(1 SHL (POSSIZE-HARD_CODED)) DUP(?)
HUF_BITLEN_P_OLD	DW	(1 SHL (POSSIZE-HARD_CODED)) DUP(?)
HUF_HEAP		DW	CHARSET_SIZE*2 DUP(?)
HUF_PUT_BUF		DB	HPB_SIZE DUP(?)
HUF_MINI_BUFFER		DB	HMB_SIZE DUP(?)
HASH_TABLE_OFFSET	DW	HTW_SIZE DUP(?)

LZW_S1			ENDS

;HUF_CODEWORD_C		EQU	HUF_LEFT_C
;HUF_BITLEN_C		EQU	HUF_RIGHT_C
;HUF_CODEWORD_P		EQU	HUF_LEFT_P
;HUF_BITLEN_P		EQU	HUF_RIGHT_P

LZW_TEMPS		STRUC

			DB	REUSABLE1_BP DUP(?)

;LZW_HASH_BP		DW	?
;LZW_HASH_TABLE_BP	DW	?
LZW_SEGMENT_BP		DW	?
OLD_MATCHED_COUNT_BP	DW	?
OLD_OFFSET_BP		DW	?
NEXT_AVAIL_BP		DW	?
LZWBUF_PTR_BP		DD	?
LZW_TMP_PTR_BP		DD	?
LZW_CPOS_BP		DW	?
HUF_AVAIL_BP		DW	?
HUF_SIZE_BP		DW	?
HUF_HEAP_START_BP	DW	?
HUF_HEAP_END_BP		DW	?
PUTLEN_TARG_BP		DW	?
LZWDATA_BP		DW	?
LZW_BYTES_LEFT_BP	DD	?
HUF_TOTALS_BP		DD	?
LZW_INBUF_LIMIT_BP	DW	?
LZW_SCAN_LIMIT_BP	DW	?
LZW_INPUT_PTR_BP	DD	?
HUF_PUT_PTR_BP		DD	?
LZW_DICT_COUNT_BP	DW	?
DO_STUFF_LIMIT_BP	DW	?
HUF_MAKETREE_P_FLAGS_BP	DW	?

LZW_MASK_BP		DB	?

LZW_TEMPS		ENDS


DO	LZW_HASH
DO	LZW_HASH_TABLE
DO	LZW_SEGMENT
DO	OLD_MATCHED_COUNT
DO	OLD_OFFSET
DO	NEXT_AVAIL
DO	LZWBUF_PTR
DO	LZW_TMP_PTR
DO	LZW_CPOS
DO	HUF_AVAIL
DO	HUF_SIZE
DO	HUF_HEAP_START
DO	HUF_HEAP_END
DO	PUTLEN_TARG
DO	LZWDATA
DO	LZW_BYTES_LEFT
DO	HUF_TOTALS
DO	LZW_INBUF_LIMIT
DO	LZW_SCAN_LIMIT
DO	LZW_INPUT_PTR
DO	HUF_PUT_PTR
DO	LZW_DICT_COUNT
DO	DO_STUFF_LIMIT
DO	HUF_MAKETREE_P_FLAGS

DO	LZW_MASK

.LIST
