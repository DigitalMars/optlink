		TITLE	RELEXE_5 - Copyright (c) SLR Systems 1994

		INCLUDE MACROS

		PUBLIC	RELEASE_EXETABLE_5,RELEASE_EXETABLE_ALL


		.DATA

		EXTERNDEF	EXETABLE:DWORD


		.CODE	PASS2_TEXT

		EXTERNDEF	RELEASE_BLOCK:PROC


RELEASE_EXETABLE_5	PROC
		;
		;
		;
		PUSH	EBX
		MOV	EBX,OFF EXETABLE

		MOV	ECX,64K/PAGE_SIZE+1
L1$:
		XOR	EDX,EDX
		MOV	EAX,[EBX]

		MOV	[EBX],EDX
		ADD	EBX,4

		TEST	EAX,EAX
		JZ	L2$

		CALL	RELEASE_BLOCK
L2$:
		DEC	ECX
		JNZ	L1$

		POP	EBX

		RET

RELEASE_EXETABLE_5	ENDP


RELEASE_EXETABLE_ALL	PROC
		;
		;
		;
		PUSH	EBX
		MOV	EBX,OFF EXETABLE
L1$:
		MOV	ECX,4
L2$:
		XOR	EDX,EDX
		MOV	EAX,[EBX]

		MOV	[EBX],EDX
		ADD	EBX,4

		TEST	EAX,EAX
		JZ	L3$

		CALL	RELEASE_BLOCK
		JMP	L1$

L3$:
		DEC	ECX
		JNZ	L2$

		POP	EBX

		RET

RELEASE_EXETABLE_ALL	ENDP


		END

