if	fg_ai

AIEXP_OUT_INIT	PROC
		;
		;OPEN EXE OR COM FILE FOR OUTPUT
		;
		CALL	COMMON_OUT_INIT

		CALL	OPEN_OUTPUT
		MOV	_EXE_DEVICE,BX
		XOR	DX,DX
		MOV	EXEHDR_ADDR.LW,DX	;NEXT EXEHDR WRITE ADDRESS
		MOV	EXEHDR_ADDR.HW,DX

		MOV	AX,AI_SELECTOR_COUNT	;# OF AI SELECTORS
		MOV	AIEXPHEADER._AIEXP_SEGTBL_COUNT,AX
		SHLI	AX,3			;#8
		ADD	AX,SIZE AIEXP
		MOV	AIEXPHEADER._AIEXP_IMAGE_BASE,AX
		RET

AIEXP_OUT_INIT	ENDP

endif

if fg_ai
		PUBLIC	AI_OUT_TABLE

AI_OUT_TABLE	LABEL	WORD

		DW	AIEXP_OUT_INIT
		DW	PROT_OUT_NEW_SEGMENT
		DW	EXE_OUT_NEW_SEGMOD
		DW	EXE_OUT_LDATA
		DW	AIEXP_OUT_RELOC_BASE
		DW	EXE_OUT_SEGMOD_FINISH
		DW	EXE_OUT_DATA_BLOCK
		DW	EXE_OUT_SEGMENT_FINISH
		DW	EXE_OUT_END_OF_SEGMENTS
		DW	PROT_FLUSH_SEGMENT
		DW	EXE_OUT_FLUSH_EXE

endif


