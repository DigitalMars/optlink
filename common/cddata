.XLIST

SOFT_PER_BLK		EQU	16		;# OF SYMBOLS PER BLOCK IN PRELIMINARY PASS

MYCOMDAT_STRUCT		STRUC

_MCD_NEXT_MCD_LINDEX	DD	?		;MYCOMDATS IN LINKED LIST ORDER FOR FLUSHING AT MODEND
_MCD_LNAME_LINDEX	DD	?		;LNAME INDEX

_MCD_NEXT_HASH_PTR	DD	?		;USED ONLY BY VIRDEFS

_MCD_SYMBOL_GINDEX	DD	?		;REAL COMDAT SYMBOL I REFER TO...

_MCD_SIZE		DD	?		;SIZE THIS COMDAT
_MCD_FIRST_SOFT_BLOCK	DD	?		;PTR TO FIRST BLOCK OF 7 REFERENCES
_MCD_FIRST_SOFT_PENT_BLOCK	DD	?

_MCD_ATTRIB		DB	?
_MCD_ALIGN		DB	?
_MCD_FLAGS		DB	?		;FLAGS, LIKE IGNORING THIS DEFINITION
_MCD_CHECKSUM		DB	?		;CURRENT CHECKSUM

_MCD_SEGMOD_LINDEX	DD	?		;FOR CONTINUATION CHECKING
_MCD_GROUP_LINDEX	DD	?		;''
_MCD_SEGMOD_GINDEX	DD	?		;CONVERTED TO GLOBAL INDEX

MYCOMDAT_STRUCT		ENDS

MCD_FLAGSSSS		RECORD	MCD_ACTIVE:1,MCD_HARD_REF:1,MCD_KEEPING_THIS:1,MCD_DATA_IN_CODE:1,MCD_LOCAL:1,MCD_IGNORE_THIS:1,MCD_FLUSHED:1

CD_FLAGS		RECORD	CD_DATA_IN_CODE:1,CD_LOCAL:1,CD_LIDATA:1,CD_CONTINUATION:1

;SEGMOD_STRUCT	STRUC		;**** MUST MAKE SURE CDDATA MATCHES ****
;
;_SM_BASE_SEG_INDEX	DW	?	;PTR BACK TO BASE SEGMENT
;_SM_NEXT_SEGMOD_INDEX	DW	?	;NEXT SEGMOD THIS SEGMENT OR SECTION
;
;_SM_START		DD	?	;BASE ADDRESS THIS PIECE
;_SM_LEN 		DD	?	;LENGTH THIS PIECE
;_SM_FIRST_DAT		DD	?	;LEDATA, LIDATA, FIXUPP, FORREF
;
;_SM_SECTION_INDEX	DW	?	;NEED THIS EVEN WITHOUT OVERLAYS...
;_SM_PLTYPE		DB	?	;(PLTYPES RECORD)
;_SM_FLAGS_2		DB	?	;CSEG DEFINED
;
;_SM_ALIGN		DB	?	;ALIGN THIS PIECE
;_SM_FLAGS		DB	?	;
;_SM_MODULE_CSEG	DD	?	;OWNING MODULE, OR DEBUG CSEG PTR
;
;SEGMOD_STRUCT	ENDS	;***** MUST MAKE SURE CDDATA MATCHES *****

CDSEGMOD_STRUCT	STRUC

_CDSM_BASE_SEG_GINDEX	DD	?
_CDSM_ATTRIB		DB	?		;HIGH HALF = SELECTION CRITERIA, LOW-HALF = ALLOCATION TYPE
_CDSM_CDALIGN		DB	?		;ALIGNMENT TYPE, JUST LIKE NORMAL SEGMOD
			DW	?

_CDSM_START		DD	?
_CDSM_SIZE		DD	?
_CDSM_FIRST_DAT		DD	?

_CDSM_SECTION_GINDEX	DD	?

_CDSM_PLTYPE		DB	?
_CDSM_FLAGS_2		DB	?
_CDSM_SMALIGN		DB	?
_CDSM_SMFLAGS		DB	?

_CDSM_MODULE_CSEG_GINDEX DD	?

;_CDSM_COMDAT_LINK	DD	?

_CDSM_SOFT_BLOCK	DD	?
_CDSM_COMDAT_GINDEX	EQU	_CDSM_SOFT_BLOCK	;VALID AFTER MIDDLE...

_CDSM_SOFT_PENT_BLOCK	DD	?
_CDSM_PREV_SEGMOD_GINDEX	DD	?

_CDSM_PREV_COUNT	DD	?

_CDSM_CDFLAGS		DB	?		;CD_FLAGS
_CDSM_CHECKSUM		DB	?
			DW	?

_CDSM_SEGMOD_GINDEX	DD	?		;SEGMOD I WISH TO BE ATTACHED TO...

CDSEGMOD_STRUCT		ENDS

IFDEF	_SM_PLTYPE
.ERRNZ	(SIZE SEGMOD_STRUCT-_CDSM_SOFT_BLOCK)
ENDIF

.LIST

